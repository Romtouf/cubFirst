<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Carousel - API Compl√®te</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 2rem; background: #f5f5f5; }
        .container { max-width: 800px; margin: 0 auto; }
        
        .carousel-container { 
            width: 100%; 
            height: 300px; 
            margin: 2rem 0; 
            border: 2px solid #ddd; 
            border-radius: 12px; 
            overflow: hidden; 
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }
        
        .carousel-slide {
            display: flex;
            align-items: center;
            justify-content: center;
            height: 100%;
            font-size: 2rem;
            font-weight: bold;
            color: white;
            position: relative;
        }
        
        .carousel-slide:nth-child(1) { background: linear-gradient(45deg, #ff6b6b, #ee5a24); }
        .carousel-slide:nth-child(2) { background: linear-gradient(45deg, #4ecdc4, #44a08d); }
        .carousel-slide:nth-child(3) { background: linear-gradient(45deg, #45b7d1, #96c93d); }
        .carousel-slide:nth-child(4) { background: linear-gradient(45deg, #f093fb, #f5576c); }
        .carousel-slide:nth-child(5) { background: linear-gradient(45deg, #4facfe, #00f2fe); }
        
        .slide-number {
            position: absolute;
            top: 20px;
            right: 20px;
            background: rgba(0,0,0,0.3);
            padding: 0.5rem 1rem;
            border-radius: 20px;
            font-size: 1rem;
        }
        
        .controls { 
            background: white; 
            padding: 2rem; 
            border-radius: 12px; 
            margin: 1rem 0; 
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        
        .control-group {
            margin-bottom: 1.5rem;
            padding-bottom: 1.5rem;
            border-bottom: 1px solid #eee;
        }
        
        .control-group:last-child {
            border-bottom: none;
            margin-bottom: 0;
        }
        
        .control-group h3 {
            margin: 0 0 1rem 0;
            color: #333;
            font-size: 1.2rem;
        }
        
        .btn { 
            padding: 0.75rem 1.5rem; 
            margin: 0.25rem; 
            background: #007bff; 
            color: white; 
            border: none; 
            border-radius: 6px; 
            cursor: pointer; 
            font-size: 0.9rem;
            transition: all 0.3s ease;
        }
        
        .btn:hover { 
            background: #0056b3; 
            transform: translateY(-2px);
        }
        
        .btn-success { background: #28a745; }
        .btn-success:hover { background: #1e7e34; }
        
        .btn-warning { background: #ffc107; color: #212529; }
        .btn-warning:hover { background: #e0a800; }
        
        .btn-danger { background: #dc3545; }
        .btn-danger:hover { background: #c82333; }
        
        .btn-secondary { background: #6c757d; }
        .btn-secondary:hover { background: #545b62; }
        
        .status { 
            background: #e9ecef; 
            padding: 1rem; 
            border-radius: 6px; 
            margin: 1rem 0; 
            font-family: monospace;
            font-size: 0.9rem;
        }
        
        .input-group {
            display: flex;
            gap: 0.5rem;
            align-items: center;
            margin: 0.5rem 0;
        }
        
        .input-group input {
            padding: 0.5rem;
            border: 1px solid #ddd;
            border-radius: 4px;
            width: 100px;
        }
        
        .event-log {
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 6px;
            padding: 1rem;
            max-height: 200px;
            overflow-y: auto;
            font-family: monospace;
            font-size: 0.8rem;
        }
        
        .event-item {
            padding: 0.25rem 0;
            border-bottom: 1px solid #eee;
        }
        
        .event-item:last-child {
            border-bottom: none;
        }
        
        .timestamp {
            color: #6c757d;
            margin-right: 0.5rem;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üé† Carousel avec API Compl√®te</h1>
        
        <p><strong>Maintenant tu peux modifier le carousel apr√®s initialisation !</strong></p>

        <!-- Carousel -->
        <div id="myCarousel" data-plugin="carousel" data-options='{"interval": 4000}' class="carousel-container">
            <div class="carousel-slide">
                Slide 1
                <div class="slide-number">1/3</div>
            </div>
            <div class="carousel-slide">
                Slide 2
                <div class="slide-number">2/3</div>
            </div>
            <div class="carousel-slide">
                Slide 3
                <div class="slide-number">3/3</div>
            </div>
        </div>

        <!-- Contr√¥les -->
        <div class="controls">
            
            <!-- Navigation -->
            <div class="control-group">
                <h3>üéÆ Navigation</h3>
                <button class="btn" onclick="carousel.prev()">‚Üê Pr√©c√©dent</button>
                <button class="btn" onclick="carousel.next()">Suivant ‚Üí</button>
                <div class="input-group">
                    <span>Aller au slide :</span>
                    <input type="number" id="slideInput" min="0" max="2" value="0">
                    <button class="btn btn-secondary" onclick="goToSlide()">Go</button>
                </div>
            </div>

            <!-- Lecture -->
            <div class="control-group">
                <h3>‚èØÔ∏è Lecture</h3>
                <button class="btn btn-success" onclick="carousel.play()">‚ñ∂ Play</button>
                <button class="btn btn-warning" onclick="carousel.pause()">‚è∏ Pause</button>
                <div class="input-group">
                    <span>Vitesse (ms) :</span>
                    <input type="number" id="speedInput" value="4000" min="500" max="10000" step="500">
                    <button class="btn btn-secondary" onclick="changeSpeed()">Changer</button>
                </div>
            </div>

            <!-- Modification dynamique -->
            <div class="control-group">
                <h3>üîß Modification</h3>
                <button class="btn btn-success" onclick="addSlide()">+ Ajouter slide</button>
                <button class="btn btn-danger" onclick="removeSlide()">- Supprimer slide</button>
                <button class="btn btn-secondary" onclick="carousel.refresh()">üîÑ Refresh</button>
            </div>

            <!-- Informations -->
            <div class="control-group">
                <h3>üìä Informations</h3>
                <button class="btn btn-secondary" onclick="updateStatus()">Actualiser status</button>
                <div id="status" class="status">
                    Cliquez sur "Actualiser status" pour voir les informations
                </div>
            </div>

        </div>

        <!-- Log des √©v√©nements -->
        <div class="controls">
            <h3>üìù Log des √©v√©nements</h3>
            <div id="eventLog" class="event-log">
                <div class="event-item">
                    <span class="timestamp">[Init]</span>
                    Carousel initialis√©
                </div>
            </div>
            <button class="btn btn-secondary" onclick="clearLog()">Vider le log</button>
        </div>

    </div>

    <script src="dist/cubfirst.min.js"></script>
    <script>
        // R√©cup√©rer l'API du carousel
        let carousel;
        let slideCounter = 4;
        
        // Attendre que le DOM soit charg√©
        document.addEventListener('DOMContentLoaded', () => {
            // M√©thode 1: Via cubFirst.getAPI()
            carousel = cubFirst.getAPI('#myCarousel', 'carousel');
            
            // M√©thode 2: Via la fonction globale getCarousel()
            // carousel = getCarousel('#myCarousel');
            
            // M√©thode 3: Directement sur l'√©l√©ment
            // const el = document.getElementById('myCarousel');
            // carousel = el.carouselAPI;
            
            if (carousel) {
                logEvent('API du carousel r√©cup√©r√©e avec succ√®s');
                
                // √âcouter les √©v√©nements du carousel
                document.getElementById('myCarousel').addEventListener('carouselChange', (e) => {
                    logEvent(`Slide chang√©: ${e.detail.currentSlide + 1}/${e.detail.totalSlides}`);
                    updateSlideNumbers();
                });
                
                updateStatus();
            } else {
                logEvent('‚ùå Impossible de r√©cup√©rer l\'API du carousel');
            }
        });
        
        function goToSlide() {
            const input = document.getElementById('slideInput');
            const slideIndex = parseInt(input.value);
            carousel.goTo(slideIndex);
            logEvent(`Navigation vers slide ${slideIndex + 1}`);
        }
        
        function changeSpeed() {
            const input = document.getElementById('speedInput');
            const speed = parseInt(input.value);
            carousel.setSpeed(speed);
            logEvent(`Vitesse chang√©e: ${speed}ms`);
        }
        
        function addSlide() {
            const carouselEl = document.getElementById('myCarousel');
            const newSlide = document.createElement('div');
            newSlide.className = 'carousel-slide';
            newSlide.innerHTML = `
                Slide ${slideCounter}
                <div class="slide-number">${slideCounter}/${slideCounter}</div>
            `;
            newSlide.style.background = `linear-gradient(45deg, hsl(${Math.random() * 360}, 70%, 60%), hsl(${Math.random() * 360}, 70%, 50%))`;
            
            // Ins√©rer avant les bullets
            const bullets = carouselEl.querySelector('.cubfirst-carousel-bullets');
            carouselEl.insertBefore(newSlide, bullets);
            
            slideCounter++;
            
            // Le carousel d√©tecte automatiquement le nouveau slide gr√¢ce au MutationObserver
            logEvent(`Slide ajout√© (total: ${carousel.getTotalSlides()})`);
            
            // Mettre √† jour l'input max
            document.getElementById('slideInput').max = carousel.getTotalSlides() - 1;
        }
        
        function removeSlide() {
            const carouselEl = document.getElementById('myCarousel');
            const slides = carouselEl.querySelectorAll('.carousel-slide');
            
            if (slides.length > 1) {
                slides[slides.length - 1].remove();
                logEvent(`Slide supprim√© (total: ${carousel.getTotalSlides()})`);
                
                // Mettre √† jour l'input max
                document.getElementById('slideInput').max = Math.max(0, carousel.getTotalSlides() - 1);
            } else {
                logEvent('‚ùå Impossible de supprimer le dernier slide');
            }
        }
        
        function updateStatus() {
            if (!carousel) return;
            
            const status = document.getElementById('status');
            status.innerHTML = `
                <strong>√âtat du carousel:</strong><br>
                ‚Ä¢ Slide actuel: ${carousel.getCurrentSlide() + 1}/${carousel.getTotalSlides()}<br>
                ‚Ä¢ En lecture: ${carousel.isPlaying() ? '‚úÖ Oui' : '‚ùå Non'}<br>
                ‚Ä¢ API disponible: ‚úÖ Oui<br>
                ‚Ä¢ M√©thodes: next(), prev(), goTo(), play(), pause(), setSpeed(), refresh()
            `;
        }
        
        function updateSlideNumbers() {
            const slides = document.querySelectorAll('.carousel-slide');
            const total = slides.length;
            slides.forEach((slide, index) => {
                const numberEl = slide.querySelector('.slide-number');
                if (numberEl) {
                    numberEl.textContent = `${index + 1}/${total}`;
                }
            });
        }
        
        function logEvent(message) {
            const log = document.getElementById('eventLog');
            const timestamp = new Date().toLocaleTimeString();
            const eventItem = document.createElement('div');
            eventItem.className = 'event-item';
            eventItem.innerHTML = `<span class="timestamp">[${timestamp}]</span>${message}`;
            log.appendChild(eventItem);
            log.scrollTop = log.scrollHeight;
        }
        
        function clearLog() {
            const log = document.getElementById('eventLog');
            log.innerHTML = '<div class="event-item"><span class="timestamp">[Init]</span>Log vid√©</div>';
        }
        
        // D√©monstration automatique
        setTimeout(() => {
            logEvent('üé¨ D√©monstration automatique d√©marr√©e');
            
            setTimeout(() => {
                carousel.pause();
                logEvent('‚è∏ Carousel mis en pause');
            }, 2000);
            
            setTimeout(() => {
                carousel.goTo(1);
                logEvent('üéØ Navigation vers slide 2');
            }, 4000);
            
            setTimeout(() => {
                carousel.setSpeed(2000);
                carousel.play();
                logEvent('‚ö° Vitesse acc√©l√©r√©e et lecture reprise');
            }, 6000);
            
        }, 1000);
    </script>
</body>
</html>
