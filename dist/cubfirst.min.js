(()=>{var d=(t,n,e)=>new Promise((o,a)=>{var r=i=>{try{c(e.next(i))}catch(l){a(l)}},s=i=>{try{c(e.throw(i))}catch(l){a(l)}},c=i=>i.done?o(i.value):Promise.resolve(i.value).then(r,s);c((e=e.apply(t,n)).next())});function m(t,n){let e=t.querySelector(".modal-content");if(!e||!n.trigger)return;t.classList.add("cubfirst-modal"),e.classList.add("cubfirst-modal-content");let o=document.createElement("button");o.textContent="X",o.className="cubfirst-modal-close",o.onclick=()=>t.style.display="none",t.appendChild(o);let a=document.querySelector(n.trigger);a&&a.addEventListener("click",()=>t.style.display="flex"),t.addEventListener("click",r=>{r.target===t&&(t.style.display="none")}),t.style.display="none"}function u(t){var r;let n=t.querySelectorAll("[data-tab]"),e=t.querySelectorAll(".tab-content"),o=s=>{n.forEach(c=>c.classList.toggle("active",c.dataset.tab===s)),e.forEach(c=>c.style.display=c.dataset.tab===s?"block":"none")};n.forEach(s=>s.addEventListener("click",()=>o(s.dataset.tab)));let a=(r=n[0])==null?void 0:r.dataset.tab;a&&o(a)}function f(t){t.querySelectorAll(".accordion-item").forEach(n=>{let e=n.querySelector(".accordion-header"),o=n.querySelector(".accordion-content");o.style.display="none",e.addEventListener("click",()=>{let a=o.style.display==="block";t.querySelectorAll(".accordion-content").forEach(r=>r.style.display="none"),a||(o.style.display="block")})})}function g(t,n){if(!n.text)return;let e=document.createElement("div");e.textContent=n.text,e.className="cubfirst-tooltip",Object.assign(e.style,{position:"absolute",pointerEvents:"none",zIndex:"1000",display:"none",backgroundColor:"black",color:"white",padding:"4px 8px",borderRadius:"4px",fontSize:"12px",whiteSpace:"nowrap"}),document.body.appendChild(e),t.addEventListener("mouseenter",()=>{e.style.display="block";let o=t.getBoundingClientRect();e.style.left=`${o.left+window.scrollX}px`,e.style.top=`${o.top+window.scrollY-e.offsetHeight-8}px`}),t.addEventListener("mouseleave",()=>e.style.display="none")}function p(t,n){n.endpoint&&t.addEventListener("submit",e=>d(null,null,function*(){e.preventDefault();let o={};new FormData(t).forEach((a,r)=>o[r]=a.toString());try{yield fetch(n.endpoint,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)}),alert("Message envoy\xE9 !"),t.reset()}catch(a){alert("Erreur lors de l\u2019envoi")}}))}function E(t,n){let e=document.querySelector(n.target);e&&t.addEventListener("click",()=>d(null,null,function*(){let o=e instanceof HTMLInputElement||e instanceof HTMLTextAreaElement?e.value:e.textContent||"";try{yield navigator.clipboard.writeText(o),t.textContent="Copi\xE9 !",setTimeout(()=>t.textContent="Copier",2e3)}catch(a){alert("\xC9chec de la copie")}}))}function y(t,n){let e=document.querySelector(n.target);e&&t.addEventListener("click",()=>{e.toggleAttribute("hidden")})}function L(t,n){let e=document.querySelector(n.target);e&&t.addEventListener("click",()=>{let o=e.getBoundingClientRect().top+window.scrollY-(n.offset||0);window.scrollTo({top:o,behavior:n.behavior||"smooth"})})}function b(t,n){let e=new Date(n.to);if(isNaN(e.getTime()))return;let o=()=>{let a=new Date,r=e.getTime()-a.getTime();if(r<=0)return t.textContent="Temps \xE9coul\xE9";let s=Math.floor(r/864e5),c=Math.floor(r/36e5%24),i=Math.floor(r/6e4%60),l=Math.floor(r/1e3%60);t.textContent=`${s}j ${c}h ${i}m ${l}s`};o(),setInterval(o,1e3)}function T(t){let n=document.documentElement,e="dark-mode",o=localStorage.getItem("theme");(o==="dark"||!o&&window.matchMedia("(prefers-color-scheme: dark)").matches)&&n.classList.add(e),t.addEventListener("click",()=>{let a=n.classList.toggle(e);localStorage.setItem("theme",a?"dark":"light")})}function h(t,n){t.addEventListener("click",e=>{if(!window.confirm(n.message))return e.preventDefault();if(n.action){let a=document.querySelector(n.action);a instanceof HTMLFormElement&&a.submit(),a instanceof HTMLAnchorElement&&(window.location.href=a.href)}})}document.addEventListener("DOMContentLoaded",()=>{document.querySelectorAll("[data-plugin]").forEach(t=>{let n=t.dataset.plugin,e=t.dataset.options?JSON.parse(t.dataset.options):{};try{switch(n){case"modal":m(t,e);break;case"tabs":u(t);break;case"accordion":f(t);break;case"tooltip":g(t,e);break;case"contact-form":p(t,e);break;case"copy":E(t,e);break;case"toggle":y(t,e);break;case"scrollto":L(t,e);break;case"countdown":b(t,e);break;case"darkmode-toggle":T(t);break;case"confirm":h(t,e);break}}catch(o){console.warn(`cubFirst: erreur sur le plugin "${n}"`,o)}})});})();
