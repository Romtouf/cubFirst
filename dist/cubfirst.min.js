(()=>{var g=(t,n,e)=>new Promise((o,r)=>{var i=c=>{try{s(e.next(c))}catch(d){r(d)}},a=c=>{try{s(e.throw(c))}catch(d){r(d)}},s=c=>c.done?o(c.value):Promise.resolve(c.value).then(i,a);s((e=e.apply(t,n)).next())});var v=()=>{if(document.getElementById("cubfirst-styles"))return;let t=document.createElement("style");t.id="cubfirst-styles",t.textContent=`
    /* Styles de base */
    .hidden { display: none !important; }
    .cursor-pointer { cursor: pointer; }
    
    /* Modal */
    .cubfirst-modal {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.5);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 1000;
    }
    
    .cubfirst-modal-content {
      background: white;
      padding: 2rem;
      border-radius: 8px;
      max-width: 90%;
      max-height: 90%;
      position: relative;
    }
    
    .cubfirst-modal-close {
      position: absolute;
      top: 10px;
      right: 15px;
      background: none;
      border: none;
      font-size: 24px;
      cursor: pointer;
      color: #666;
    }
    
    /* Tabs */
    .cubfirst-tabs .tab-title {
      padding: 0.5rem 1rem;
      cursor: pointer;
      border-bottom: 2px solid transparent;
    }
    
    .cubfirst-tabs .tab-title.active {
      border-bottom-color: #3b82f6;
      color: #3b82f6;
    }
    
    /* Accordion */
    .accordion-header {
      cursor: pointer;
      padding: 1rem;
      border: 1px solid #e5e7eb;
      background: #f9fafb;
    }
    
    .accordion-content {
      padding: 1rem;
      border: 1px solid #e5e7eb;
      border-top: none;
    }
    
    /* Dropdown */
    .cubfirst-dropdown-menu[hidden] {
      display: none !important;
    }
    
    .cubfirst-dropdown-menu {
      position: absolute;
      background: white;
      border: 1px solid #e5e7eb;
      border-radius: 0.375rem;
      box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
      z-index: 50;
    }
    
    /* Carousel */
    .cubfirst-carousel {
      position: relative;
      overflow: hidden;
    }
    
    .carousel-slide {
      display: none;
    }
    
    .carousel-slide.active {
      display: block;
    }
    
    /* Toast */
    .cubfirst-toast {
      position: fixed;
      bottom: 1rem;
      left: 50%;
      transform: translateX(-50%);
      padding: 1rem 1.5rem;
      border-radius: 0.5rem;
      color: white;
      z-index: 1000;
      transition: opacity 0.5s ease;
    }
    
    .cubfirst-toast.success { background-color: #10b981; }
    .cubfirst-toast.error { background-color: #ef4444; }
    .cubfirst-toast.info { background-color: #6b7280; }
    
    /* Animations */
    .cubfirst-reveal-fade {
      animation: fadeIn 0.6s ease-in-out;
    }
    
    .cubfirst-reveal-slide {
      animation: slideUp 0.6s ease-in-out;
    }
    
    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }
    
    @keyframes slideUp {
      from { transform: translateY(30px); opacity: 0; }
      to { transform: translateY(0); opacity: 1; }
    }
    
    /* Hamburger */
    .cubfirst-hamburger {
      display: flex;
      flex-direction: column;
      width: 30px;
      height: 20px;
      cursor: pointer;
    }
    
    .cubfirst-hamburger span {
      width: 100%;
      height: 3px;
      background-color: #333;
      margin: 2px 0;
      transition: 0.3s;
    }
    
    .cubfirst-hamburger.is-active span:nth-child(1) {
      transform: rotate(-45deg) translate(-5px, 6px);
    }
    
    .cubfirst-hamburger.is-active span:nth-child(2) {
      opacity: 0;
    }
    
    .cubfirst-hamburger.is-active span:nth-child(3) {
      transform: rotate(45deg) translate(-5px, -6px);
    }
  `,document.head.appendChild(t)};function x(t,n){let e=t.querySelector(".modal-content");if(!e||!n.trigger)return;t.classList.add("cubfirst-modal"),e.classList.add("cubfirst-modal-content");let o=document.createElement("button");o.textContent="\xD7",o.className="cubfirst-modal-close",o.onclick=()=>{t.style.display="none",document.body.style.overflow="auto"},e.appendChild(o);let r=document.querySelector(n.trigger);r&&r.addEventListener("click",()=>{t.style.display="flex",document.body.style.overflow="hidden"}),t.addEventListener("click",i=>{i.target===t&&(t.style.display="none",document.body.style.overflow="auto")}),document.addEventListener("keydown",i=>{i.key==="Escape"&&t.style.display==="flex"&&(t.style.display="none",document.body.style.overflow="auto")}),t.style.display="none"}function E(t){var i;t.classList.add("cubfirst-tabs");let n=t.querySelectorAll("[data-tab]"),e=t.querySelectorAll(".tab-content");n.forEach(a=>a.classList.add("tab-title"));let o=a=>{n.forEach(s=>s.classList.toggle("active",s.dataset.tab===a)),e.forEach(s=>{let c=s;c.style.display=c.dataset.tab===a?"block":"none"})};n.forEach(a=>a.addEventListener("click",()=>o(a.dataset.tab)));let r=(i=n[0])==null?void 0:i.dataset.tab;r&&o(r)}function L(t){t.querySelectorAll(".accordion-item").forEach(n=>{let e=n.querySelector(".accordion-header"),o=n.querySelector(".accordion-content");!e||!o||(o.style.display="none",e.addEventListener("click",()=>{let r=o.style.display==="block";t.querySelectorAll(".accordion-content").forEach(i=>i.style.display="none"),r||(o.style.display="block")}))})}function w(t,n){if(!n.text)return;let e=document.createElement("div");e.textContent=n.text,e.className="cubfirst-tooltip",Object.assign(e.style,{position:"absolute",pointerEvents:"none",zIndex:"1000",display:"none",backgroundColor:"black",color:"white",padding:"4px 8px",borderRadius:"4px",fontSize:"12px",whiteSpace:"nowrap"}),document.body.appendChild(e);let o=()=>{e.style.display="block";let a=t.getBoundingClientRect();e.style.left=`${a.left+window.scrollX}px`,e.style.top=`${a.top+window.scrollY-e.offsetHeight-8}px`},r=()=>{e.style.display="none"};t.addEventListener("mouseenter",o),t.addEventListener("mouseleave",r);let i=new MutationObserver(()=>{document.contains(t)||(e.remove(),i.disconnect())});i.observe(document.body,{childList:!0,subtree:!0})}function y(t,n){if(!n.message)return;let e=document.createElement("div");e.className=`cubfirst-toast ${n.type||"info"}`,e.textContent=n.message,document.body.appendChild(e),setTimeout(()=>e.style.opacity="1",10),setTimeout(()=>{e.style.opacity="0",setTimeout(()=>e.remove(),500)},n.duration||3e3)}function T(t,n){n.endpoint&&t.addEventListener("submit",e=>g(this,null,function*(){e.preventDefault();let o=t.querySelector('button[type="submit"]'),r=(o==null?void 0:o.textContent)||"Envoyer";o&&(o.disabled=!0,o.textContent="Envoi...");let i={};new FormData(t).forEach((a,s)=>i[s]=a.toString());try{let a=yield fetch(n.endpoint,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)});if(a.ok)alert("Message envoy\xE9 avec succ\xE8s !"),t.reset();else throw new Error(`Erreur HTTP: ${a.status}`)}catch(a){console.error("Erreur:",a),alert("Erreur lors de l'envoi du message")}finally{o&&(o.disabled=!1,o.textContent=r)}}))}function k(t,n){let e=document.querySelector(n.target);if(!e)return;let o=t.textContent||"Copier";t.addEventListener("click",()=>g(this,null,function*(){let r=e instanceof HTMLInputElement||e instanceof HTMLTextAreaElement?e.value:e.textContent||"";try{yield navigator.clipboard.writeText(r),t.textContent="Copi\xE9 !",setTimeout(()=>t.textContent=o,2e3)}catch(i){let a=document.createElement("textarea");a.value=r,document.body.appendChild(a),a.select(),document.execCommand("copy"),document.body.removeChild(a),t.textContent="Copi\xE9 !",setTimeout(()=>t.textContent=o,2e3)}}))}function M(t,n){let e=document.querySelector(n.target);e&&t.addEventListener("click",()=>{e.style.display==="none"||e.hasAttribute("hidden")?(e.style.display="",e.removeAttribute("hidden")):(e.style.display="none",e.setAttribute("hidden","true"))})}function H(t,n){let e=document.querySelector(n.target);e&&t.addEventListener("click",o=>{o.preventDefault();let r=e.getBoundingClientRect().top+window.scrollY-(n.offset||0);window.scrollTo({top:r,behavior:n.behavior||"smooth"})})}function C(t,n){let e=new Date(n.to);if(isNaN(e.getTime())){t.textContent="Date invalide";return}let o=()=>{let a=new Date,s=e.getTime()-a.getTime();if(s<=0){t.textContent="Temps \xE9coul\xE9";return}let c=Math.floor(s/864e5),d=Math.floor(s/36e5%24),l=Math.floor(s/6e4%60),m=Math.floor(s/1e3%60);t.textContent=`${c}j ${d}h ${l}m ${m}s`};o();let r=setInterval(o,1e3),i=new MutationObserver(()=>{document.contains(t)||(clearInterval(r),i.disconnect())});i.observe(document.body,{childList:!0,subtree:!0})}function S(t){t.addEventListener("click",()=>{let n=document.documentElement.classList.toggle("dark-mode");localStorage.setItem("darkMode",n.toString())}),localStorage.getItem("darkMode")==="true"&&document.documentElement.classList.add("dark-mode")}function A(t,n){t.addEventListener("click",e=>{confirm(n.message||"\xCAtes-vous s\xFBr ?")||e.preventDefault()})}function $(t,n){let e=document.querySelector(n.trigger),o=t.querySelector(".dropdown-menu");!e||!o||(o.classList.add("cubfirst-dropdown-menu"),o.setAttribute("hidden","true"),e.addEventListener("click",r=>{r.stopPropagation();let i=o.hasAttribute("hidden");document.querySelectorAll(".cubfirst-dropdown-menu").forEach(a=>a.setAttribute("hidden","true")),i&&o.removeAttribute("hidden")}),document.addEventListener("click",r=>{t.contains(r.target)||o.setAttribute("hidden","true")}))}function q(t,n){var m,f;let e=Array.from(t.querySelectorAll(".carousel-slide"));if(e.length===0)return;t.classList.add("cubfirst-carousel");let o=0,r=null,i=document.createElement("div");i.className="cubfirst-carousel-bullets",i.style.cssText="display: flex; justify-content: center; gap: 8px; margin-top: 8px;";let a=e.map((b,p)=>{let u=document.createElement("button");return u.style.cssText="width: 12px; height: 12px; border-radius: 50%; border: none; background-color: #d1d5db; cursor: pointer;",u.addEventListener("click",()=>{o=p,s(o),l()}),i.appendChild(u),u});t.appendChild(i);let s=b=>{e.forEach((p,u)=>{p.classList.toggle("active",u===b),a[u].style.backgroundColor=u===b?"#3b82f6":"#d1d5db"})},c=()=>{o=(o+1)%e.length,s(o)},d=()=>{o=(o-1+e.length)%e.length,s(o)},l=()=>{r&&clearInterval(r);let b=n.interval||0;b>0&&(r=setInterval(c,b))};(m=t.querySelector('[data-carousel="next"]'))==null||m.addEventListener("click",()=>{c(),l()}),(f=t.querySelector('[data-carousel="prev"]'))==null||f.addEventListener("click",()=>{d(),l()}),s(o),l()}function I(t,n){t.style.opacity="0",t.style.transition="opacity 0.6s ease";let e=new IntersectionObserver(o=>{o.forEach(r=>{r.isIntersecting&&(t.style.opacity="1",t.classList.add(`cubfirst-reveal-${n.animation||"fade"}`),e.disconnect())})},{threshold:.1});e.observe(t)}function N(t,n){n.type==="phone"&&(t.setAttribute("maxlength","14"),t.addEventListener("input",()=>{let e=t.value.replace(/\D/g,"");e.length>=10?t.value=e.replace(/(\d{2})(\d{2})(\d{2})(\d{2})(\d{2})/,"$1 $2 $3 $4 $5"):t.value=e})),n.type==="date"&&(t.setAttribute("placeholder","JJ/MM/AAAA"),t.setAttribute("maxlength","10"),t.addEventListener("input",()=>{let e=t.value.replace(/\D/g,"");e.length>=8?t.value=e.replace(/(\d{2})(\d{2})(\d{4})/,"$1/$2/$3"):e.length>=4?t.value=e.replace(/(\d{2})(\d{2})/,"$1/$2"):t.value=e}))}function z(t){let n=()=>{let e=window.scrollY,o=document.documentElement.scrollHeight-window.innerHeight,r=Math.min(100,Math.max(0,e/o*100));t.style.width=`${r}%`};Object.assign(t.style,{position:"fixed",top:"0",left:"0",height:"4px",backgroundColor:"#3b82f6",zIndex:"9999",width:"0%",transition:"width 0.1s ease"}),window.addEventListener("scroll",n),n()}function O(t,n){if(t.className="cubfirst-card",t.style.cssText="border-radius: 8px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); padding: 1rem; background: white; display: flex; flex-direction: column; gap: 0.5rem;",n.image){let e=document.createElement("img");e.src=n.image,e.alt=n.title||"",e.style.cssText="border-radius: 6px; width: 100%; object-fit: cover;",t.appendChild(e)}if(n.title){let e=document.createElement("h3");e.textContent=n.title,e.style.cssText="font-size: 1.25rem; font-weight: bold; margin: 0;",t.appendChild(e)}if(n.content){let e=document.createElement("p");e.textContent=n.content,e.style.cssText="font-size: 0.875rem; color: #6b7280; margin: 0;",t.appendChild(e)}if(n.footer){let e=document.createElement("div");e.textContent=n.footer,e.style.cssText="font-size: 0.75rem; color: #9ca3af; padding-top: 0.5rem; border-top: 1px solid #e5e7eb;",t.appendChild(e)}}function D(t,n){var a;let e=n.value||0,o=n.max||5,r=(a=n.readonly)!=null?a:!0,i=[];t.style.cssText="display: flex; gap: 2px;";for(let s=1;s<=o;s++){let c=document.createElement("span");c.textContent="\u2605",c.style.cssText=`cursor: ${r?"default":"pointer"}; font-size: 1.5rem; color: ${s<=e?"#facc15":"#d1d5db"}; user-select: none;`,r||(c.addEventListener("mouseenter",()=>{i.forEach((d,l)=>{d.style.color=l<s?"#facc15":"#d1d5db"})}),c.addEventListener("mouseleave",()=>{i.forEach((d,l)=>{d.style.color=l<e?"#facc15":"#d1d5db"})}),c.addEventListener("click",()=>{e=s,i.forEach((d,l)=>{d.style.color=l<s?"#facc15":"#d1d5db"}),t.dispatchEvent(new CustomEvent("ratingChanged",{detail:{rating:e}}))})),i.push(c),t.appendChild(c)}}function j(t,n){let e=Array.from(document.querySelectorAll(n.target)),o=0,r=n.batch||3,i=()=>{e.slice(o,o+r).forEach(s=>{s.style.display="",s.removeAttribute("hidden")}),o+=r,o>=e.length&&(t.style.display="none")};e.forEach((a,s)=>{s>=r&&(a.style.display="none",a.setAttribute("hidden","true"))}),t.addEventListener("click",i),i(),o=r}function P(t,n){let e=document.querySelector(n.target);if(!e)return;if(!t.querySelector("span")){t.className="cubfirst-hamburger";for(let r=0;r<3;r++){let i=document.createElement("span");t.appendChild(i)}}let o=()=>{e.style.display==="none"||e.hasAttribute("hidden")?(e.style.display="",e.removeAttribute("hidden")):(e.style.display="none",e.setAttribute("hidden","true")),t.classList.toggle("is-active")};t.addEventListener("click",r=>{r.stopPropagation(),o()}),document.addEventListener("click",r=>{!e.contains(r.target)&&!t.contains(r.target)&&(e.style.display="none",e.setAttribute("hidden","true"),t.classList.remove("is-active"))})}function F(t,n){let e=document.querySelectorAll(n.target);t.addEventListener("click",()=>{e.forEach(o=>{(o.dataset.tag||"").includes(n.value)||n.value==="all"?(o.style.display="",o.removeAttribute("hidden")):(o.style.display="none",o.setAttribute("hidden","true"))})})}function R(t){t.style.transition="all 0.3s ease",t.style.cursor="pointer",t.addEventListener("click",()=>{t.classList.toggle("cubfirst-grid-expanded")?Object.assign(t.style,{transform:"scale(1.05)",zIndex:"10",position:"relative",boxShadow:"0 10px 20px rgba(0,0,0,0.2)"}):Object.assign(t.style,{transform:"scale(1)",zIndex:"",position:"",boxShadow:""})})}function B(t,n){if(!n.image&&!n.text)return;let e=document.createElement("div");if(e.className="cubfirst-hover-preview",Object.assign(e.style,{position:"fixed",zIndex:"50",display:"none",pointerEvents:"none",background:"#fff",border:"1px solid #ccc",padding:"6px",borderRadius:"6px",boxShadow:"0 4px 12px rgba(0,0,0,0.1)",maxWidth:"250px"}),n.image){let s=document.createElement("img");s.src=n.image,s.style.cssText="max-width: 200px; width: 100%; height: auto; display: block;",e.appendChild(s)}if(n.text){let s=document.createElement("p");s.textContent=n.text,s.style.cssText="margin: 4px 0 0 0; font-size: 14px; color: #333;",e.appendChild(s)}document.body.appendChild(e);let o=()=>{e.style.display="block"},r=()=>{e.style.display="none"},i=s=>{let c=s.pageX+16,d=s.pageY+16,l=e.getBoundingClientRect(),m=window.innerWidth-l.width-20,f=window.innerHeight-l.height-20;e.style.left=`${Math.min(c,m)}px`,e.style.top=`${Math.min(d,f)}px`};t.addEventListener("mouseenter",o),t.addEventListener("mouseleave",r),t.addEventListener("mousemove",i);let a=new MutationObserver(()=>{document.contains(t)||(e.remove(),a.disconnect())});a.observe(document.body,{childList:!0,subtree:!0})}var Y={init:(t,n,e={})=>{document.querySelectorAll(t).forEach(r=>{r.dataset.plugin=n,r.dataset.options=JSON.stringify(e),h(r,n,e)})},toast:(t,n="info",e=3e3)=>{let o=document.createElement("div");y(o,{message:t,type:n,duration:e})},version:"2.0.0"};function h(t,n,e){try{switch(n){case"modal":x(t,e);break;case"tabs":E(t);break;case"accordion":L(t);break;case"tooltip":w(t,e);break;case"contact-form":T(t,e);break;case"copy":k(t,e);break;case"toggle":M(t,e);break;case"scrollto":H(t,e);break;case"countdown":C(t,e);break;case"darkmode-toggle":S(t);break;case"confirm":A(t,e);break;case"dropdown":$(t,e);break;case"carousel":q(t,e);break;case"toast":y(t,e);break;case"reveal":I(t,e);break;case"input-mask":N(t,e);break;case"progress-scroll":z(t);break;case"card":O(t,e);break;case"filter":F(t,e);break;case"grid-expand":R(t);break;case"hover-preview":B(t,e);break;case"rating":D(t,e);break;case"load-more":j(t,e);break;case"hamburger":P(t,e);break;default:console.warn(`cubFirst: Plugin "${n}" non reconnu`)}}catch(o){console.error(`cubFirst: Erreur sur le plugin "${n}"`,o)}}document.addEventListener("DOMContentLoaded",()=>{v(),document.querySelectorAll("[data-plugin]").forEach(t=>{let n=t.dataset.plugin;if(!n)return;let e=t.dataset.options?JSON.parse(t.dataset.options):{};h(t,n,e)})});typeof window!="undefined"&&(window.cubFirst=Y);})();
