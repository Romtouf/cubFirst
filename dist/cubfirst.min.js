(()=>{var f=(e,a,t)=>new Promise((n,r)=>{var s=c=>{try{o(t.next(c))}catch(d){r(d)}},i=c=>{try{o(t.throw(c))}catch(d){r(d)}},o=c=>c.done?n(c.value):Promise.resolve(c.value).then(s,i);o((t=t.apply(e,a)).next())});function y(e,a){let t=e.querySelector(".modal-content");if(!t||!a.trigger)return;e.classList.add("cubfirst-modal"),t.classList.add("cubfirst-modal-content");let n=document.createElement("button");n.textContent="X",n.className="cubfirst-modal-close",n.onclick=()=>e.style.display="none",e.appendChild(n);let r=document.querySelector(a.trigger);r&&r.addEventListener("click",()=>e.style.display="flex"),e.addEventListener("click",s=>{s.target===e&&(e.style.display="none")}),e.style.display="none"}function b(e){var s;let a=e.querySelectorAll("[data-tab]"),t=e.querySelectorAll(".tab-content"),n=i=>{a.forEach(o=>o.classList.toggle("active",o.dataset.tab===i)),t.forEach(o=>o.style.display=o.dataset.tab===i?"block":"none")};a.forEach(i=>i.addEventListener("click",()=>n(i.dataset.tab)));let r=(s=a[0])==null?void 0:s.dataset.tab;r&&n(r)}function E(e){e.querySelectorAll(".accordion-item").forEach(a=>{let t=a.querySelector(".accordion-header"),n=a.querySelector(".accordion-content");n.style.display="none",t.addEventListener("click",()=>{let r=n.style.display==="block";e.querySelectorAll(".accordion-content").forEach(s=>s.style.display="none"),r||(n.style.display="block")})})}function h(e,a){if(!a.text)return;let t=document.createElement("div");t.textContent=a.text,t.className="cubfirst-tooltip",Object.assign(t.style,{position:"absolute",pointerEvents:"none",zIndex:"1000",display:"none",backgroundColor:"black",color:"white",padding:"4px 8px",borderRadius:"4px",fontSize:"12px",whiteSpace:"nowrap"}),document.body.appendChild(t),e.addEventListener("mouseenter",()=>{t.style.display="block";let n=e.getBoundingClientRect();t.style.left=`${n.left+window.scrollX}px`,t.style.top=`${n.top+window.scrollY-t.offsetHeight-8}px`}),e.addEventListener("mouseleave",()=>t.style.display="none")}function L(e,a){if(!a.message)return;let t=document.createElement("div");t.className=`fixed bottom-4 left-1/2 -translate-x-1/2 px-4 py-2 rounded shadow-md text-white z-50 transition-opacity duration-500 ${a.type==="success"?"bg-green-600":a.type==="error"?"bg-red-600":"bg-gray-800"}`,t.textContent=a.message,document.body.appendChild(t),setTimeout(()=>{t.style.opacity="0",setTimeout(()=>t.remove(),500)},a.duration||3e3)}function v(e,a){a.endpoint&&e.addEventListener("submit",t=>f(null,null,function*(){t.preventDefault();let n={};new FormData(e).forEach((r,s)=>n[s]=r.toString());try{yield fetch(a.endpoint,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}),alert("Message envoy\xE9 !"),e.reset()}catch(r){alert("Erreur lors de l\u2019envoi")}}))}function x(e,a){let t=document.querySelector(a.target);t&&e.addEventListener("click",()=>f(null,null,function*(){let n=t instanceof HTMLInputElement||t instanceof HTMLTextAreaElement?t.value:t.textContent||"";try{yield navigator.clipboard.writeText(n),e.textContent="Copi\xE9 !",setTimeout(()=>e.textContent="Copier",2e3)}catch(r){alert("\xC9chec de la copie")}}))}function T(e,a){let t=document.querySelector(a.target);t&&e.addEventListener("click",()=>{t.toggleAttribute("hidden")})}function k(e,a){let t=document.querySelector(a.target);t&&e.addEventListener("click",()=>{let n=t.getBoundingClientRect().top+window.scrollY-(a.offset||0);window.scrollTo({top:n,behavior:a.behavior||"smooth"})})}function M(e,a){let t=new Date(a.to);if(isNaN(t.getTime()))return;let n=()=>{let r=new Date,s=t.getTime()-r.getTime();if(s<=0)return e.textContent="Temps \xE9coul\xE9";let i=Math.floor(s/864e5),o=Math.floor(s/36e5%24),c=Math.floor(s/6e4%60),d=Math.floor(s/1e3%60);e.textContent=`${i}j ${o}h ${c}m ${d}s`};n(),setInterval(n,1e3)}function H(e){e.addEventListener("click",()=>{document.documentElement.classList.toggle("dark-mode")})}function w(e,a){e.addEventListener("click",t=>{confirm(a.message)||t.preventDefault()})}function C(e,a){let t=document.querySelector(a.trigger),n=e.querySelector(".dropdown-menu");!t||!n||(n.classList.add("cubfirst-dropdown-menu"),n.setAttribute("hidden","true"),t.addEventListener("click",r=>{r.stopPropagation();let s=n.hasAttribute("hidden");document.querySelectorAll(".cubfirst-dropdown-menu").forEach(i=>i.setAttribute("hidden","true")),s&&n.removeAttribute("hidden")}),document.addEventListener("click",r=>{e.contains(r.target)||n.setAttribute("hidden","true")}))}function S(e,a){var l,p;let t=Array.from(e.querySelectorAll(".carousel-slide"));if(t.length===0)return;let n=0,r=document.createElement("div");r.className="cubfirst-carousel-bullets flex justify-center gap-2 mt-2";let s=t.map((m,g)=>{let u=document.createElement("button");return u.className="w-3 h-3 rounded-full bg-gray-400",u.addEventListener("click",()=>{n=g,i(n)}),r.appendChild(u),u});e.appendChild(r);let i=m=>{t.forEach((g,u)=>{g.style.display=u===m?"block":"none",s[u].className=u===m?"w-3 h-3 rounded-full bg-blue-600":"w-3 h-3 rounded-full bg-gray-400"})};i(n);let o=()=>{n=(n+1)%t.length,i(n)},c=()=>{n=(n-1+t.length)%t.length,i(n)};(l=e.querySelector('[data-carousel="next"]'))==null||l.addEventListener("click",o),(p=e.querySelector('[data-carousel="prev"]'))==null||p.addEventListener("click",c);let d=a.interval||0;d>0&&setInterval(o,d)}function q(e,a){e.style.opacity="0",e.style.transition="opacity 0.6s ease";let t=new IntersectionObserver(n=>{n.forEach(r=>{r.isIntersecting&&(e.style.opacity="1",e.classList.add(`cubfirst-reveal-${a.animation||"fade"}`),t.disconnect())})},{threshold:.1});t.observe(e)}function N(e,a){a.type==="phone"&&e.addEventListener("input",()=>{e.value=e.value.replace(/\D/g,"").replace(/(\d{2})(\d{2})(\d{2})(\d{2})(\d{2})/,"$1 $2 $3 $4 $5")}),a.type==="date"&&e.addEventListener("input",()=>{e.value=e.value.replace(/\D/g,"").replace(/(\d{2})(\d{2})(\d{4})/,"$1/$2/$3")})}function $(e){let a=()=>{let t=window.scrollY,n=document.documentElement.scrollHeight-window.innerHeight,r=Math.min(100,t/n*100);e.style.width=`${r}%`};e.style.position="fixed",e.style.top="0",e.style.left="0",e.style.height="4px",e.style.backgroundColor="#3b82f6",e.style.zIndex="9999",window.addEventListener("scroll",a),a()}function A(e,a){let t=document.createElement("div");if(t.className="cubfirst-card rounded shadow p-4 bg-white space-y-2",a.image){let n=document.createElement("img");n.src=a.image,n.alt=a.title||"",n.className="rounded w-full mb-2",t.appendChild(n)}if(a.title){let n=document.createElement("h3");n.textContent=a.title,n.className="text-lg font-bold",t.appendChild(n)}if(a.content){let n=document.createElement("p");n.textContent=a.content,n.className="text-sm text-gray-700",t.appendChild(n)}if(a.footer){let n=document.createElement("div");n.textContent=a.footer,n.className="text-xs text-gray-500 pt-2 border-t",t.appendChild(n)}e.replaceWith(t)}function I(e,a){var i;let t=a.value||0,n=a.max||5,r=(i=a.readonly)!=null?i:!0,s=[];for(let o=1;o<=n;o++){let c=document.createElement("span");c.textContent="\u2605",c.style.cursor=r?"default":"pointer",c.style.fontSize="1.5rem",c.style.color=o<=t?"#facc15":"#d1d5db",r||(c.addEventListener("mouseenter",()=>{s.forEach((d,l)=>d.style.color=l<o?"#facc15":"#d1d5db")}),c.addEventListener("mouseleave",()=>{s.forEach((d,l)=>d.style.color=l<t?"#facc15":"#d1d5db")}),c.addEventListener("click",()=>{s.forEach((d,l)=>d.style.color=l<o?"#facc15":"#d1d5db")})),s.push(c),e.appendChild(c)}}function D(e,a){let t=Array.from(document.querySelectorAll(a.target)),n=0,r=a.batch||3,s=()=>{t.slice(n,n+r).forEach(o=>o.classList.remove("hidden")),n+=r,n>=t.length&&(e.style.display="none")};e.addEventListener("click",s),t.forEach((i,o)=>{o>=r&&i.classList.add("hidden")})}function z(e,a){let t=document.querySelector(a.target);if(!t)return;let n=()=>{let r=!t.classList.contains("hidden");t.classList.toggle("hidden",r),e.classList.toggle("is-active",!r)};e.addEventListener("click",r=>{r.stopPropagation(),n()}),document.addEventListener("click",r=>{!t.contains(r.target)&&!e.contains(r.target)&&(t.classList.add("hidden"),e.classList.remove("is-active"))})}function O(e,a){let t=document.querySelectorAll(a.target);e.addEventListener("click",()=>{t.forEach(n=>{let r=n.dataset.tag||"";n.style.display=r.includes(a.value)||a.value==="all"?"":"none"})})}function R(e){e.style.transition="all 0.3s ease",e.classList.add("cursor-pointer"),e.addEventListener("click",()=>{e.classList.toggle("cubfirst-grid-expanded")?(e.style.transform="scale(1.05)",e.style.zIndex="10",e.style.position="relative",e.style.boxShadow="0 10px 20px rgba(0,0,0,0.2)"):(e.style.transform="scale(1)",e.style.zIndex="",e.style.position="",e.style.boxShadow="")})}function F(e,a){if(!a.image&&!a.text)return;let t=document.createElement("div");if(t.className="cubfirst-hover-preview fixed z-50 hidden pointer-events-none",t.style.background="#fff",t.style.border="1px solid #ccc",t.style.padding="6px",t.style.borderRadius="6px",t.style.boxShadow="0 4px 12px rgba(0,0,0,0.1)",a.image){let n=document.createElement("img");n.src=a.image,n.style.maxWidth="200px",t.appendChild(n)}if(a.text){let n=document.createElement("p");n.textContent=a.text,n.style.marginTop="4px",n.style.fontSize="14px",t.appendChild(n)}document.body.appendChild(t),e.addEventListener("mouseenter",()=>t.style.display="block"),e.addEventListener("mouseleave",()=>t.style.display="none"),e.addEventListener("mousemove",n=>{t.style.left=`${n.pageX+16}px`,t.style.top=`${n.pageY+16}px`})}document.addEventListener("DOMContentLoaded",()=>{document.querySelectorAll("[data-plugin]").forEach(e=>{let a=e.dataset.plugin,t=e.dataset.options?JSON.parse(e.dataset.options):{};try{switch(a){case"modal":y(e,t);break;case"tabs":b(e);break;case"accordion":E(e);break;case"tooltip":h(e,t);break;case"contact-form":v(e,t);break;case"copy":x(e,t);break;case"toggle":T(e,t);break;case"scrollto":k(e,t);break;case"countdown":M(e,t);break;case"darkmode-toggle":H(e);break;case"confirm":w(e,t);break;case"dropdown":C(e,t);break;case"carousel":S(e,t);break;case"toast":L(e,t);break;case"reveal":q(e,t);break;case"input-mask":N(e,t);break;case"progress-scroll":$(e);break;case"card":A(e,t);break;case"filter":O(e,t);break;case"grid-expand":R(e);break;case"hover-preview":F(e,t);break;case"rating":I(e,t);break;case"load-more":D(e,t);break;case"hamburger":z(e,t);break}}catch(n){console.warn(`cubFirst: erreur sur le plugin "${a}"`,n)}})});})();
