<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>cubFirst - API Universelle</title>
    <style>
        body { 
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            line-height: 1.6; 
            margin: 0; 
            padding: 2rem; 
            background: #f8fafc;
        }
        
        .container { max-width: 1200px; margin: 0 auto; }
        
        h1 { text-align: center; color: #2d3748; margin-bottom: 3rem; }
        
        .demo-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 2rem;
            margin: 2rem 0;
        }
        
        .demo-card {
            background: white;
            border-radius: 12px;
            padding: 2rem;
            box-shadow: 0 4px 6px rgba(0,0,0,0.05);
            border: 1px solid #e2e8f0;
        }
        
        .demo-card h3 {
            color: #4a5568;
            margin-bottom: 1rem;
            font-size: 1.25rem;
        }
        
        .controls {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            margin: 1rem 0;
        }
        
        .btn {
            padding: 0.5rem 1rem;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.9rem;
            font-weight: 500;
            transition: all 0.3s ease;
        }
        
        .btn-primary { background: #3b82f6; color: white; }
        .btn-primary:hover { background: #2563eb; }
        
        .btn-success { background: #10b981; color: white; }
        .btn-success:hover { background: #059669; }
        
        .btn-danger { background: #ef4444; color: white; }
        .btn-danger:hover { background: #dc2626; }
        
        .btn-secondary { background: #6b7280; color: white; }
        .btn-secondary:hover { background: #4b5563; }
        
        .status {
            background: #f1f5f9;
            border: 1px solid #cbd5e1;
            border-radius: 6px;
            padding: 1rem;
            margin: 1rem 0;
            font-family: monospace;
            font-size: 0.9rem;
        }
        
        .api-example {
            background: #1e293b;
            color: #e2e8f0;
            padding: 1rem;
            border-radius: 6px;
            font-family: monospace;
            font-size: 0.85rem;
            margin: 1rem 0;
            overflow-x: auto;
        }
        
        /* Styles pour les composants */
        .carousel-demo {
            height: 150px;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            overflow: hidden;
            margin: 1rem 0;
        }
        
        .carousel-slide {
            display: flex;
            align-items: center;
            justify-content: center;
            height: 100%;
            font-size: 1.5rem;
            font-weight: bold;
            color: white;
        }
        
        .carousel-slide:nth-child(1) { background: #3b82f6; }
        .carousel-slide:nth-child(2) { background: #10b981; }
        .carousel-slide:nth-child(3) { background: #f59e0b; }
        
        .tabs-demo .tab-nav {
            display: flex;
            border-bottom: 1px solid #e2e8f0;
            margin-bottom: 1rem;
        }
        
        .tab-title {
            padding: 0.75rem 1rem;
            cursor: pointer;
            border-bottom: 2px solid transparent;
            transition: all 0.3s ease;
        }
        
        .tab-title.active {
            border-bottom-color: #3b82f6;
            color: #3b82f6;
        }
        
        .tab-content {
            padding: 1rem 0;
        }
        
        .accordion-item {
            border: 1px solid #e2e8f0;
            border-radius: 6px;
            margin-bottom: 0.5rem;
        }
        
        .accordion-header {
            padding: 1rem;
            background: #f8fafc;
            cursor: pointer;
            font-weight: 500;
        }
        
        .accordion-header:hover {
            background: #f1f5f9;
        }
        
        .accordion-content {
            padding: 1rem;
            border-top: 1px solid #e2e8f0;
        }
        
        .rating-demo {
            font-size: 1.5rem;
            margin: 1rem 0;
        }
        
        .event-log {
            background: #f8fafc;
            border: 1px solid #e2e8f0;
            border-radius: 6px;
            padding: 1rem;
            max-height: 200px;
            overflow-y: auto;
            font-family: monospace;
            font-size: 0.8rem;
        }
        
        .event-item {
            padding: 0.25rem 0;
            border-bottom: 1px solid #e2e8f0;
        }
        
        .event-item:last-child {
            border-bottom: none;
        }
        
        .timestamp {
            color: #6b7280;
            margin-right: 0.5rem;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üöÄ cubFirst - API Universelle</h1>
        <p style="text-align: center; font-size: 1.1rem; color: #4a5568; margin-bottom: 3rem;">
            <strong>Tous les composants sont maintenant 100% customisables !</strong>
        </p>

        <div class="demo-grid">
            
            <!-- Modal API -->
            <div class="demo-card">
                <h3>ü™ü Modal API</h3>
                
                <button id="modal-trigger" class="btn btn-primary">Ouvrir Modal</button>
                
                <div id="myModal" data-plugin="modal" data-options='{"trigger": "#modal-trigger"}' style="display: none;">
                    <div class="modal-content">
                        <h3>Modal avec API</h3>
                        <p id="modal-content">Contenu initial de la modal</p>
                    </div>
                </div>
                
                <div class="controls">
                    <button class="btn btn-success" onclick="modalAPI.open()">Open()</button>
                    <button class="btn btn-danger" onclick="modalAPI.close()">Close()</button>
                    <button class="btn btn-secondary" onclick="updateModalContent()">Changer contenu</button>
                    <button class="btn btn-secondary" onclick="checkModalStatus()">Status</button>
                </div>
                
                <div class="api-example">
const modal = cubFirst.getAPI('#myModal', 'modal');
modal.open();
modal.close();
modal.setContent('&lt;p&gt;Nouveau contenu&lt;/p&gt;');
modal.isOpen(); // true/false
                </div>
            </div>

            <!-- Tabs API -->
            <div class="demo-card">
                <h3>üìë Tabs API</h3>
                
                <div id="myTabs" class="tabs-demo" data-plugin="tabs">
                    <div class="tab-nav">
                        <div data-tab="tab1" class="tab-title">Tab 1</div>
                        <div data-tab="tab2" class="tab-title">Tab 2</div>
                        <div data-tab="tab3" class="tab-title">Tab 3</div>
                    </div>
                    <div class="tab-content" data-tab="tab1">Contenu du premier onglet</div>
                    <div class="tab-content" data-tab="tab2">Contenu du deuxi√®me onglet</div>
                    <div class="tab-content" data-tab="tab3">Contenu du troisi√®me onglet</div>
                </div>
                
                <div class="controls">
                    <button class="btn btn-primary" onclick="tabsAPI.goTo(0)">Tab 1</button>
                    <button class="btn btn-primary" onclick="tabsAPI.goTo(1)">Tab 2</button>
                    <button class="btn btn-primary" onclick="tabsAPI.goTo(2)">Tab 3</button>
                    <button class="btn btn-success" onclick="addNewTab()">+ Ajouter Tab</button>
                    <button class="btn btn-secondary" onclick="getTabsInfo()">Info</button>
                </div>
                
                <div class="api-example">
const tabs = cubFirst.getAPI('#myTabs', 'tabs');
tabs.goTo(1);
tabs.addTab('tab4', 'Nouveau', '&lt;p&gt;Contenu&lt;/p&gt;');
tabs.getCurrentTab(); // index actuel
                </div>
            </div>

            <!-- Carousel API -->
            <div class="demo-card">
                <h3>üé† Carousel API</h3>
                
                <div id="myCarousel" class="carousel-demo" data-plugin="carousel" data-options='{"interval": 3000}'>
                    <div class="carousel-slide">Slide 1</div>
                    <div class="carousel-slide">Slide 2</div>
                    <div class="carousel-slide">Slide 3</div>
                </div>
                
                <div class="controls">
                    <button class="btn btn-primary" onclick="carouselAPI.prev()">‚Üê Prev</button>
                    <button class="btn btn-primary" onclick="carouselAPI.next()">Next ‚Üí</button>
                    <button class="btn btn-success" onclick="carouselAPI.play()">Play</button>
                    <button class="btn btn-danger" onclick="carouselAPI.pause()">Pause</button>
                    <button class="btn btn-secondary" onclick="carouselAPI.setSpeed(1000)">Rapide</button>
                    <button class="btn btn-secondary" onclick="addCarouselSlide()">+ Slide</button>
                </div>
                
                <div class="api-example">
const carousel = cubFirst.getAPI('#myCarousel', 'carousel');
carousel.next();
carousel.setSpeed(2000);
carousel.goTo(1);
                </div>
            </div>

            <!-- Accordion API -->
            <div class="demo-card">
                <h3>ü™ó Accordion API</h3>
                
                <div id="myAccordion" data-plugin="accordion">
                    <div class="accordion-item">
                        <div class="accordion-header">Section 1</div>
                        <div class="accordion-content">Contenu de la premi√®re section</div>
                    </div>
                    <div class="accordion-item">
                        <div class="accordion-header">Section 2</div>
                        <div class="accordion-content">Contenu de la deuxi√®me section</div>
                    </div>
                    <div class="accordion-item">
                        <div class="accordion-header">Section 3</div>
                        <div class="accordion-content">Contenu de la troisi√®me section</div>
                    </div>
                </div>
                
                <div class="controls">
                    <button class="btn btn-primary" onclick="accordionAPI.open(0)">Ouvrir 1</button>
                    <button class="btn btn-primary" onclick="accordionAPI.open(1)">Ouvrir 2</button>
                    <button class="btn btn-primary" onclick="accordionAPI.open(2)">Ouvrir 3</button>
                    <button class="btn btn-danger" onclick="accordionAPI.closeAll()">Fermer tout</button>
                    <button class="btn btn-secondary" onclick="getAccordionInfo()">Info</button>
                </div>
                
                <div class="api-example">
const accordion = cubFirst.getAPI('#myAccordion', 'accordion');
accordion.open(1);
accordion.toggle(0);
accordion.closeAll();
                </div>
            </div>

            <!-- Rating API -->
            <div class="demo-card">
                <h3>‚≠ê Rating API</h3>
                
                <div id="myRating" class="rating-demo" data-plugin="rating" data-options='{"value": 3, "max": 5, "readonly": false}'></div>
                
                <div class="controls">
                    <button class="btn btn-primary" onclick="ratingAPI.setValue(1)">1 √©toile</button>
                    <button class="btn btn-primary" onclick="ratingAPI.setValue(3)">3 √©toiles</button>
                    <button class="btn btn-primary" onclick="ratingAPI.setValue(5)">5 √©toiles</button>
                    <button class="btn btn-secondary" onclick="ratingAPI.setReadonly(true)">Readonly</button>
                    <button class="btn btn-success" onclick="ratingAPI.setReadonly(false)">Interactive</button>
                    <button class="btn btn-secondary" onclick="getRatingInfo()">Info</button>
                </div>
                
                <div class="api-example">
const rating = cubFirst.getAPI('#myRating', 'rating');
rating.setValue(4);
rating.setReadonly(true);
rating.getValue(); // valeur actuelle
                </div>
            </div>

            <!-- Toast API -->
            <div class="demo-card">
                <h3>üçû Toast API</h3>
                
                <div class="controls">
                    <button class="btn btn-success" onclick="showToast('success')">Toast Succ√®s</button>
                    <button class="btn btn-danger" onclick="showToast('error')">Toast Erreur</button>
                    <button class="btn btn-primary" onclick="showToast('info')">Toast Info</button>
                    <button class="btn btn-secondary" onclick="showCustomToast()">Toast Custom</button>
                </div>
                
                <div class="api-example">
// Toast programmatique
cubFirst.toast('Message', 'success', 3000);

// Toast avec API
const toast = cubFirst.getAPI('#myToast', 'toast');
toast.show();
toast.hide();
toast.update('Nouveau message');
                </div>
            </div>

        </div>

        <!-- Event Log -->
        <div class="demo-card">
            <h3>üìù Log des √©v√©nements</h3>
            <div id="eventLog" class="event-log">
                <div class="event-item">
                    <span class="timestamp">[Init]</span>
                    APIs initialis√©es
                </div>
            </div>
            <button class="btn btn-secondary" onclick="clearLog()">Vider le log</button>
        </div>

        <!-- Status Global -->
        <div class="demo-card">
            <h3>üìä Status Global</h3>
            <div id="globalStatus" class="status">
                Cliquez sur "Actualiser" pour voir le status de tous les composants
            </div>
            <button class="btn btn-primary" onclick="updateGlobalStatus()">Actualiser Status</button>
        </div>

    </div>

    <script src="dist/cubfirst.min.js"></script>
    <script>
        // Variables globales pour les APIs
        let modalAPI, tabsAPI, carouselAPI, accordionAPI, ratingAPI;
        let tabCounter = 4;
        let slideCounter = 4;
        
        // Initialisation
        document.addEventListener('DOMContentLoaded', () => {
            // R√©cup√©rer toutes les APIs
            modalAPI = cubFirst.getAPI('#myModal', 'modal');
            tabsAPI = cubFirst.getAPI('#myTabs', 'tabs');
            carouselAPI = cubFirst.getAPI('#myCarousel', 'carousel');
            accordionAPI = cubFirst.getAPI('#myAccordion', 'accordion');
            ratingAPI = cubFirst.getAPI('#myRating', 'rating');
            
            // V√©rifier que toutes les APIs sont disponibles
            const apis = { modalAPI, tabsAPI, carouselAPI, accordionAPI, ratingAPI };
            Object.entries(apis).forEach(([name, api]) => {
                if (api) {
                    logEvent(`‚úÖ ${name} disponible`);
                } else {
                    logEvent(`‚ùå ${name} non disponible`);
                }
            });
            
            // √âcouter les √©v√©nements
            document.getElementById('myModal').addEventListener('modalOpen', () => {
                logEvent('Modal ouverte');
            });
            
            document.getElementById('myModal').addEventListener('modalClose', () => {
                logEvent('Modal ferm√©e');
            });
            
            document.getElementById('myTabs').addEventListener('tabChange', (e) => {
                logEvent(`Tab chang√©: ${e.detail.activeTab} (index ${e.detail.tabIndex})`);
            });
            
            document.getElementById('myCarousel').addEventListener('carouselChange', (e) => {
                logEvent(`Carousel: slide ${e.detail.currentSlide + 1}/${e.detail.totalSlides}`);
            });
            
            document.getElementById('myAccordion').addEventListener('accordionToggle', (e) => {
                logEvent(`Accordion: section ${e.detail.openIndex + 1} ${e.detail.openIndex >= 0 ? 'ouverte' : 'ferm√©e'}`);
            });
            
            document.getElementById('myRating').addEventListener('ratingChanged', (e) => {
                logEvent(`Rating chang√©: ${e.detail.rating} √©toiles`);
            });
        });
        
        // Fonctions Modal
        function updateModalContent() {
            modalAPI.setContent('<p style="color: #10b981;">Contenu modifi√© dynamiquement !</p>');
            logEvent('Contenu modal modifi√©');
        }
        
        function checkModalStatus() {
            const isOpen = modalAPI.isOpen();
            logEvent(`Modal status: ${isOpen ? 'ouverte' : 'ferm√©e'}`);
        }
        
        // Fonctions Tabs
        function addNewTab() {
            const tabId = `tab${tabCounter}`;
            tabsAPI.addTab(tabId, `Tab ${tabCounter}`, `<p>Contenu du tab ${tabCounter}</p>`);
            logEvent(`Tab ${tabCounter} ajout√©`);
            tabCounter++;
        }
        
        function getTabsInfo() {
            const current = tabsAPI.getCurrentTab();
            const total = tabsAPI.getTotalTabs();
            logEvent(`Tabs info: ${current + 1}/${total}`);
        }
        
        // Fonctions Carousel
        function addCarouselSlide() {
            const carousel = document.getElementById('myCarousel');
            const newSlide = document.createElement('div');
            newSlide.className = 'carousel-slide';
            newSlide.textContent = `Slide ${slideCounter}`;
            newSlide.style.background = `hsl(${Math.random() * 360}, 70%, 60%)`;
            
            const bullets = carousel.querySelector('.cubfirst-carousel-bullets');
            carousel.insertBefore(newSlide, bullets);
            
            logEvent(`Slide ${slideCounter} ajout√©`);
            slideCounter++;
        }
        
        // Fonctions Accordion
        function getAccordionInfo() {
            const openIndex = accordionAPI.getOpenIndex();
            const total = accordionAPI.getTotalItems();
            logEvent(`Accordion info: section ${openIndex >= 0 ? openIndex + 1 : 'aucune'} ouverte sur ${total}`);
        }
        
        // Fonctions Rating
        function getRatingInfo() {
            const value = ratingAPI.getValue();
            const max = ratingAPI.getMax();
            const readonly = ratingAPI.isReadonly();
            logEvent(`Rating info: ${value}/${max} (${readonly ? 'readonly' : 'interactive'})`);
        }
        
        // Fonctions Toast
        function showToast(type) {
            const messages = {
                success: 'Op√©ration r√©ussie !',
                error: 'Une erreur est survenue',
                info: 'Information importante'
            };
            cubFirst.toast(messages[type], type, 3000);
            logEvent(`Toast ${type} affich√©`);
        }
        
        function showCustomToast() {
            cubFirst.toast('Toast personnalis√© avec dur√©e longue', 'info', 5000);
            logEvent('Toast personnalis√© affich√©');
        }
        
        // Fonctions utilitaires
        function updateGlobalStatus() {
            const status = document.getElementById('globalStatus');
            const apis = {
                'Modal': modalAPI,
                'Tabs': tabsAPI,
                'Carousel': carouselAPI,
                'Accordion': accordionAPI,
                'Rating': ratingAPI
            };
            
            let statusText = '<strong>Status des APIs:</strong><br>';
            Object.entries(apis).forEach(([name, api]) => {
                statusText += `‚Ä¢ ${name}: ${api ? '‚úÖ Disponible' : '‚ùå Non disponible'}<br>`;
            });
            
            statusText += '<br><strong>M√©thodes disponibles:</strong><br>';
            statusText += '‚Ä¢ Modal: open(), close(), isOpen(), setContent()<br>';
            statusText += '‚Ä¢ Tabs: goTo(), addTab(), getCurrentTab(), getTotalTabs()<br>';
            statusText += '‚Ä¢ Carousel: next(), prev(), play(), pause(), setSpeed(), goTo()<br>';
            statusText += '‚Ä¢ Accordion: open(), close(), toggle(), closeAll()<br>';
            statusText += '‚Ä¢ Rating: setValue(), getValue(), setReadonly(), isReadonly()<br>';
            
            status.innerHTML = statusText;
        }
        
        function logEvent(message) {
            const log = document.getElementById('eventLog');
            const timestamp = new Date().toLocaleTimeString();
            const eventItem = document.createElement('div');
            eventItem.className = 'event-item';
            eventItem.innerHTML = `<span class="timestamp">[${timestamp}]</span>${message}`;
            log.appendChild(eventItem);
            log.scrollTop = log.scrollHeight;
        }
        
        function clearLog() {
            const log = document.getElementById('eventLog');
            log.innerHTML = '<div class="event-item"><span class="timestamp">[Init]</span>Log vid√©</div>';
        }
    </script>
</body>
</html>
